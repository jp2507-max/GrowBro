# Supabase configuration for GrowBro auth setup
[auth]
site_url = "https://growbro.app"
additional_redirect_urls = [
  # Custom scheme redirects (production)
  "growbro://auth/callback",
  "growbro://verify-email",
  "growbro://reset-password",
  # Custom scheme redirects (development)
  "growbro-dev://auth/callback",
  "growbro-dev://verify-email",
  "growbro-dev://reset-password",
  # Custom scheme redirects (staging)
  "growbro-staging://auth/callback",
  "growbro-staging://verify-email",
  "growbro-staging://reset-password"
]
enable_signup = true
jwt_expiry = 300  # 5 minutes access-token lifetime to tighten session revocation window

[auth.email]
enable_signup = true
enable_confirmations = true

[auth.external.apple]
enabled = true
client_id = "env(APPLE_CLIENT_ID)"
secret = "env(APPLE_CLIENT_SECRET)"

[auth.external.google]
enabled = true
client_id = "env(GOOGLE_CLIENT_ID)"
secret = "env(GOOGLE_CLIENT_SECRET)"

# Edge Function configurations
# enforce-auth-lockout: Login endpoint - must NOT verify JWT since users don't have one yet
[functions.enforce-auth-lockout]
verify_jwt = false
